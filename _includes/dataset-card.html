{% if include.dataset %}
<div class="dataset-card reveal">
  <div class="dataset-content">
    <div class="dataset-status">
      <span class="status-badge {% if include.dataset.status == 'published' %}published{% elsif include.dataset.status == 'development' %}development{% else %}unknown{% endif %}">
        {{ include.dataset.status | default: "Unknown" | capitalize }}
      </span>
    </div>
    
    {% if include.dataset.logo.text %}
      <div class="dataset-logo">{{ include.dataset.logo.text }}</div>
    {% elsif include.dataset.logo.url %}
      <img src="{{ include.dataset.logo.url }}" alt="{{ include.dataset.name }}" class="dataset-logo">
    {% else %}
      <img src="{{ site.baseurl }}/assets/images/{{ include.dataset.id | default: 'default' }}-logo.svg" alt="{{ include.dataset.name | default: 'Dataset' }}" class="dataset-logo" onerror="this.onerror=null; this.src='{{ site.baseurl }}/assets/images/default-logo.svg';">
    {% endif %}
    
    <h3>{{ include.dataset.name | default: "Dataset" }}</h3>
    <p>{{ include.dataset.description | default: "No description available" | truncate: 120 }}</p>
    
    {% if include.dataset.stats and include.dataset.stats.size > 0 %}
    <div class="dataset-stats">
      {% for stat in include.dataset.stats %}
        {% if forloop.index <= 3 %}
        <div class="dataset-stat">
          <span class="stat-number">{{ stat.value | default: "N/A" }}</span>
          <span class="stat-label">{{ stat.label | default: "Statistic" }}</span>
        </div>
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}
    
    <div class="dataset-meta">
      {% if include.dataset.release_date %}
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          {{ include.dataset.release_date | date: "%b %Y" }}
        </div>
      {% endif %}
      
      {% if include.dataset.expected_update %}
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          {{ include.dataset.expected_update }}
        </div>
      {% endif %}
      
      {% if include.dataset.dataset_details.size %}
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
          </svg>
          {{ include.dataset.dataset_details.size }}
        </div>
      {% endif %}
    </div>
    
    <div class="dataset-links">
      <a href="{{ site.baseurl }}/dataset/{{ include.dataset.id }}/" class="button primary" aria-label="View details for {{ include.dataset.name | default: 'this dataset' }}">View Details</a>
      {% if include.dataset.publishing[0].url %}
        <a href="{{ include.dataset.publishing[0].url }}" class="button secondary" target="_blank" rel="noopener" aria-label="View {{ include.dataset.name | default: 'dataset' }} on {{ include.dataset.publishing[0].platform | capitalize }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="button-icon">
            {% if include.dataset.publishing[0].platform == 'huggingface' %}
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
            {% elsif include.dataset.publishing[0].platform == 'github' %}
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            {% else %}
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
              <polyline points="15 3 21 3 21 9"></polyline>
              <line x1="10" y1="14" x2="21" y2="3"></line>
            {% endif %}
          </svg>
          {{ include.dataset.publishing[0].platform | capitalize }}
        </a>
      {% endif %}
    </div>
  </div>
</div>
{% else %}
<div class="dataset-card error-card reveal">
  <div class="dataset-content">
    <div class="dataset-status">
      <span class="status-badge error">Error</span>
    </div>
    <div class="dataset-logo error-logo">‚ùå</div>
    <h3>Missing Dataset</h3>
    <p>Dataset configuration is missing or invalid.</p>
    <div class="dataset-links">
      <a href="{{ site.baseurl }}/" class="button primary">Return Home</a>
    </div>
  </div>
</div>
{% endif %} 